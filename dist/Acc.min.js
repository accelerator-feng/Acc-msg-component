!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Acc=e():t.Acc=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function(){function t(){o(this,t),this.boundingBox=null}return r(t,[{key:"on",value:function(t,e){return"undefined"==typeof this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this}},{key:"fire",value:function(t,e){if(this.handlers[t]instanceof Array)for(var n=this.handlers[t],i=0,o=n.length;i<o;i++)n[i](e)}},{key:"rendUI",value:function(){}},{key:"bindUI",value:function(){}},{key:"syncUI",value:function(){}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;this.rendrUI(),this.handlers={},this.bindUI(),this.syncUI(),t.appendChild(this.boundingBox)}},{key:"destructor",value:function(){}},{key:"destroy",value:function(){this.destructor(),document.body.removeChild(this.boundingBox)}}]),t}(),s=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.config={width:300,title:"系统提示",content:"welcome!",textAlertBtn:"确定",textConfirmBtn:"确定",textCancelBtn:"取消",textPromptBtn:"确定",_promptInput:"",isPromptInputPassword:!1,defaultValuePromptInput:"",maxlengthPromptInput:10,handlerAlertBtn:null,handlerConfirmBtn:null,handlerCancelBtn:null,handlerPromptBtn:null,skinClassName:null,hasMask:!0,isDraggable:!0},t}return i(e,t),r(e,[{key:"rendrUI",value:function(){var t="";switch(this.config.type){case"alert":t="<input type=\"button\" class='Acc-alert-btn' value="+this.config.textAlertBtn+">";break;case"confirm":t="<input type=\"button\" class='Acc-confirm-btn' value="+this.config.textConfirmBtn+"><input type=\"button\" class='Acc-cancel-btn' value="+this.config.textCancelBtn+">";break;case"prompt":this.config.content+="<p class='Acc-body-prompt'>\n                        <input type="+(this.config.isPromptInputPassword?"password":"text")+" value="+this.config.defaultValuePromptInput+" maxlength="+this.config.maxlengthPromptInput+" class='Acc-prompt-input'>\n                    </p>",t="<input type='button' value="+this.config.textPromptBtn+" class='Acc-prompt-btn'>\n                    <input type='button' value="+this.config.textCancelBtn+" class='Acc-cancel-btn'>"}this.boundingBox=function(e){var n=document.createElement("div");return n.className="Acc-content",n.draggable=!0,n.innerHTML="<div class='Acc-header'>"+e.config.title+"</div>\n                              <div class='Acc-body'>"+e.config.content+"</div>\n                              <div class='Acc-footer'>\n                                   "+t+"\n                              </div>",n}(this),this._promptInput=this.boundingBox.querySelector(".Acc-prompt-input"),this.config.hasMask&&(this.mask=function(){var t=document.createElement("div");return t.className="Acc-mask",document.body.appendChild(t),t}())}},{key:"bindUI",value:function(){var t=this;this.boundingBox.addEventListener("click",function(e){switch(e.target.className){case"Acc-alert-btn":t.fire("alert"),t.destroy();break;case"Acc-confirm-btn":t.fire("confirm"),t.destroy();break;case"Acc-cancel-btn":t.fire("cancel"),t.destroy();break;case"Acc-prompt-btn":t.fire("prompt",t._promptInput.value),t.destroy()}}),this.config.handlerAlertBtn&&this.on("alert",this.config.handlerAlertBtn),this.config.handlerConfirmBtn&&this.on("confirm",this.config.handlerConfirmBtn),this.config.handlerCancelBtn&&this.on("cancel",this.config.handlerCancelBtn),this.config.handlerPromptBtn&&this.on("prompt",this.config.handlerPromptBtn)}},{key:"syncUI",value:function(){this.setWindow(this.config),this.config.skinClassName&&(this.boundingBox.className+=" "+this.config.skinClassName),this.config.isDraggable&&this.draggable(this.boundingBox)}},{key:"setWindow",value:function(t){var e=this.boundingBox.style;e.width=t.width+"px",e.height=t.height+"px",e.left=t.x||(window.innerWidth-t.width)/2+"px",e.top=t.y||(window.innerHeight-t.width)/2+"px"}},{key:"draggable",value:function(){var t=0,e=0,n=0,i=this.boundingBox;document.body.addEventListener("dragover",function(t){t.preventDefault()}),i.addEventListener("dragstart",function(o){o.dataTransfer.setData("box",o.target.className),n=o.screenY-o.pageY,t=o.pageX-i.offsetLeft,e=o.pageY-i.offsetTop}),i.addEventListener("dragend",function(n){var o=n.pageX||n.screenX-i.offsetWidth/2,r=n.pageY||n.screenY-i.offsetHeight,c=document.documentElement.clientWidth-i.offsetWidth,s=document.documentElement.clientHeight-i.offsetHeight;i.style.left=Math.min(Math.max(0,o-t),c)+"px",i.style.top=Math.min(Math.max(0,r-e),s)+"px"})}},{key:"destructor",value:function(){this.mask&&document.body.removeChild(this.mask)}},{key:"alert",value:function(t){return t=Object.assign(this.config,t,{type:"alert"}),this.render(),this}},{key:"confirm",value:function(t){return t=Object.assign(this.config,t,{type:"confirm"}),this.render(),this}},{key:"prompt",value:function(t){return t=Object.assign(this.config,t,{type:"prompt"}),this.render(),this._promptInput.select(),this}}]),e}(c);e.default=s}])});